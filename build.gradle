import groovy.json.JsonSlurper

description = 'javascript spellchecker'

def verifyDictionary(dict) {
	assert dict instanceof Map
	assert dict.words instanceof Map
	dict.words.each {
		index, words ->
			//def words = dict.words[index]
			assert words instanceof ArrayList
			words.each {
				word ->
					// each word should have the attribute 'w' defined.
					assert word.w != null : "attribute 'w' missing for entry in '" + index + "'"
					// verify that the word corresponds to the index.
					assert word.w.toLowerCase().replace("|", "").equals(index) : "word '" + word.w + "' does not correspond to entry in '" + index + "'"
					// verify that each word has its type defined.
					assert word.type != null : "word '" + word.w + "' is lacking a type defintion"
			}
	}
}

task verifyDictionaryDeDE {
	description = 'verifies the dictionary to be syntactical correct'
	verifyDictionary(new JsonSlurper().parse(new File("${projectDir}/dict/alltiny.dict.base.de_de.json")))
}

task verifyDictionaryEnGB {
	description = 'verifies the dictionary to be syntactical correct'
	verifyDictionary(new JsonSlurper().parse(new File("${projectDir}/dict/alltiny.dict.base.en_gb.json")))
}